[
  {
    "objectID": "slides-data/api.html#quest-ce-quune-api",
    "href": "slides-data/api.html#quest-ce-quune-api",
    "title": "Les API",
    "section": "Qu‚Äôest-ce qu‚Äôune API ?",
    "text": "Qu‚Äôest-ce qu‚Äôune API ?\n\n\n\nUne Application programming interface ou ¬´ interface de programmation d‚Äôapplication ¬ª) est une interface logicielle qui permet de ¬´ connecter ¬ª un logiciel ou un service √† un autre logiciel ou service afin d‚Äô√©changer des donn√©es et des fonctionnalit√©s.\nCNIL\n\n\n\nD√©finition peu informative:\n\nPython, scikit-learn, Docker, etc. sont des APIs\nEn pratique, on signifie g√©n√©ralement une API REST"
  },
  {
    "objectID": "slides-data/api.html#les-apis-rest",
    "href": "slides-data/api.html#les-apis-rest",
    "title": "Les API",
    "section": "Les APIs REST",
    "text": "Les APIs REST\n\n\nAPI RESTful : API conforme au style d‚Äôarchitecture REST\n\nCommunication via le protocole HTTP\n\n\n\n\nEn pratique :\n\nOn acc√®de √† un endpoint (ex : l‚ÄôAPI de la BAN)\nAvec des requ√™tes HTTP (GET, POST, etc.) (ex : rues contenant ‚Äúcom√©die‚Äù)"
  },
  {
    "objectID": "slides-data/api.html#analogie-avec-un-restaurant",
    "href": "slides-data/api.html#analogie-avec-un-restaurant",
    "title": "Les API",
    "section": "Analogie avec un restaurant",
    "text": "Analogie avec un restaurant\n\n\nüí¨ Vous passez commande\n\nRequ√™te avec param√®tres depuis , , votre navigateur‚Ä¶\n\n\n\n\n‚ÜîÔ∏éÔ∏è Le serveur transmet la commande en cuisine:\n\nPoint d‚Äôentr√©e de l‚ÄôAPI\n\n\n\n\n\nüßë‚Äçüç≥ La cuisine pr√©pare le plat\n\nLe serveur (informatique) fait les traitements ad hoc\n\n\n\n\n\nüçï Vous recevez votre plat\n\nVous recevez une r√©ponse au format JSON"
  },
  {
    "objectID": "slides-data/api.html#pourquoi-les-api",
    "href": "slides-data/api.html#pourquoi-les-api",
    "title": "Les API",
    "section": "Pourquoi les API ?",
    "text": "Pourquoi les API ?\n\nPraticit√© car permet de dissocier:\n\nLe client: une interface web () ou un langage informatique (, , ‚Ä¶)\nLe serveur: le moteur de calcul derri√®re\n\n\n\n\nSobri√©t√©: permet l‚Äôacc√®s √† la donn√©e voulue sans parcourir tout un fichier\n\n\n\n\nConfidentialit√©: on peut mettre des droits d‚Äôacc√®s √† certaines donn√©es\n\n\n\n\nUnversalit√©: pas d‚Äôa priori sur le mode d‚Äôacc√®s"
  },
  {
    "objectID": "slides-data/api.html#les-api-de-donn√©es",
    "href": "slides-data/api.html#les-api-de-donn√©es",
    "title": "Les API",
    "section": "Les API de donn√©es",
    "text": "Les API de donn√©es"
  },
  {
    "objectID": "slides-data/api.html#les-api-de-donn√©es-1",
    "href": "slides-data/api.html#les-api-de-donn√©es-1",
    "title": "Les API",
    "section": "Les API de donn√©es",
    "text": "Les API de donn√©es\n\nPlus de fichiers enregistr√©s manuellement\n\nMise √† jour assur√©e par le producteur\nDirectement propag√©es au consommateur de donn√©es\nPermet l‚Äôautomatisation de scripts sans stockage local\n\n\n\n\nContrat formel avec un producteur de donn√©es\n\nContrairement au webscraping!\n\n\n\n\n\nPermet de r√©cup√©rer des donn√©es transform√©es complexes\n\nExemple: inf√©rences de mod√®les ü§ñ"
  },
  {
    "objectID": "slides-data/api.html#structuration-dune-requ√™te",
    "href": "slides-data/api.html#structuration-dune-requ√™te",
    "title": "Les API",
    "section": "Structuration d‚Äôune requ√™te",
    "text": "Structuration d‚Äôune requ√™te\nLes requ√™tes prennent la forme d‚ÄôURI:\n\n\\[\n\\quad \\underbrace{\\text{https://api-adresse.data.gouv.fr}}_{\\text{API root}}/\\underbrace{\\text{search}}_{\\text{API endpoint}}\n\\]\n\\[\n\\quad /?\\underbrace{\\text{q=88+avenue+verdier}}_{\\text{main parameter}}\\&\\underbrace{\\text{postcode=92120}}_{\\text{additional parameter}}\n\\]\n\nAuxquelles vont s‚Äôajouter des headers (explication √† venir)\n\n\n\n\n\n\nNote\n\n\nD√©monstration interactive"
  },
  {
    "objectID": "slides-data/api.html#les-requ√™tes-http",
    "href": "slides-data/api.html#les-requ√™tes-http",
    "title": "Les API",
    "section": "Les requ√™tes HTTP",
    "text": "Les requ√™tes HTTP\n\nGET: r√©cup√©rer des donn√©es depuis un serveur web (lecture d‚Äôune base de donn√©es‚Ä¶)\nPOST: envoyer des donn√©es au serveur (formulaires de mise √† jour de donn√©es, etc.)\nPython communique avec internet via le package requests (requests.get et requests.post)"
  },
  {
    "objectID": "slides-data/api.html#les-codes-http",
    "href": "slides-data/api.html#les-codes-http",
    "title": "Les API",
    "section": "Les codes HTTP",
    "text": "Les codes HTTP\n\nSignification des codes HTTP\n\n1xx : Informations\n2xx : Succ√®s\n3xx : Redirections\n4xx : Erreurs c√¥t√© client\n5xx : Erreurs c√¥t√© serveur\n\n\n\n\n\n\n\n\nCodes √† retenir\n\n\nCeux √† retenir sont : 200 (succ√®s), 400 (requ√™te mal structur√©e), 401 (authentification nonr√©ussie), 403 (acc√®s interdit), 404 (ressource demand√©e n‚Äôexiste pas), 503 (le serveur n‚Äôest pas en capacit√© de r√©pondre)"
  },
  {
    "objectID": "slides-data/api.html#les-swaggers",
    "href": "slides-data/api.html#les-swaggers",
    "title": "Les API",
    "section": "Les swaggers",
    "text": "Les swaggers\n\n\n\nFormat standardis√© de documentation\n\nG√©n√©ralement ${URL_ROOT}/docs\n\nUtilisation interactive:\n\nG√©n√®re des exemples curl (ligne de commande)"
  },
  {
    "objectID": "slides-data/api.html#comment-conna√Ætre-les-param√®tres-dune-api",
    "href": "slides-data/api.html#comment-conna√Ætre-les-param√®tres-dune-api",
    "title": "Les API",
    "section": "Comment conna√Ætre les param√®tres d‚Äôune API ?",
    "text": "Comment conna√Ætre les param√®tres d‚Äôune API ?\n\nSwagger \n\n\n\nOutils d√©veloppement navigateur (CTRL+MAJ+K sur ):\n\nOnglet r√©seau \n\n\n\n\n\nPostman \n\n\n\n\nExtension  REST Client"
  },
  {
    "objectID": "slides-data/api.html#les-requ√™tes-get",
    "href": "slides-data/api.html#les-requ√™tes-get",
    "title": "Les API",
    "section": "Les requ√™tes GET",
    "text": "Les requ√™tes GET\n\n\n\nRequ√™te la plus commune\n\n\n\nTransformation en objet  (JSON -&gt; dict) est naturelle\n\n\n\n\nFormattage d√©pend de chaque API (lire la doc ! üëÆ)\n\n\n\n\nRetravailler l‚Äôoutput peut √™tre lourd\n\nimport requests\nadresse = \"88 avenue verdier\"\nurl_ban_example = (\n    f\"https://api-adresse.data.gouv.fr/search/\"\n    f\"?q={adresse.replace(\" \", \"+\")}&postcode=92120\"\n)\nrequests.get(url_ban_example).json()"
  },
  {
    "objectID": "slides-data/api.html#les-requ√™tes-post",
    "href": "slides-data/api.html#les-requ√™tes-post",
    "title": "Les API",
    "section": "Les requ√™tes POST",
    "text": "Les requ√™tes POST\n\n\n\nEnvoyer des donn√©es utiles √† l‚ÄôAPI\nPlus complexe mais Requests est flexible\n\nTransformer les objets  en input de l‚ÄôAPI\n\n\nparams = {\n    \"columns\": [\"adresse\", \"Nom_commune\"],\n    \"citycode\": \"DEPCOM\",\n    \"result_columns\": [\"result_score\", \"latitude\", \"longitude\"],\n}\n\nresponse = requests.post(\n        \"https://api-adresse.data.gouv.fr/search/csv/\",\n        data=params,\n        files={\"data\": open(csv_file, \"rb\")},\n    )"
  },
  {
    "objectID": "slides-data/api.html#bonnes-pratiques",
    "href": "slides-data/api.html#bonnes-pratiques",
    "title": "Les API",
    "section": "Bonnes pratiques",
    "text": "Bonnes pratiques\nLa doctrine g√©n√©rale\n\nSource: Cours de l‚ÄôENSAE de mise en production"
  },
  {
    "objectID": "slides-data/api.html#bonnes-pratiques-pour-les-secrets",
    "href": "slides-data/api.html#bonnes-pratiques-pour-les-secrets",
    "title": "Les API",
    "section": "Bonnes pratiques pour les secrets",
    "text": "Bonnes pratiques pour les secrets\n\n\n\nBoite de dialogue via getpass (application interactive uniquement)\n\n\n\nVariables d‚Äôenvironnement:\n\nDans un fichier .env (non committ√©!) lu avec dotenv\nDans les secrets de l‚Äôint√©gration continue (cf.¬†doc )\n\n\nfrom dotenv import load_dotenv\nload_dotenv()\ntoken = os.getenv(\"MON_PETIT_JETON\")"
  },
  {
    "objectID": "slides-data/api.html#conclusion",
    "href": "slides-data/api.html#conclusion",
    "title": "Les API",
    "section": "Conclusion",
    "text": "Conclusion\n\nPratique pour r√©cup√©rer des donn√©es ponctuelles:\n\nAfficher un nombre limit√© d‚Äôenregistrements dans une application\nR√©cup√©rer des donn√©es issues d‚Äôun processus de transformation complexe\n\n\n\n\nLimit√©es en termes de volum√©trie ou stabilit√© d‚Äôacc√®s\n\n\n\n\nCode tr√®s adh√©rant √† une API et un langage client"
  },
  {
    "objectID": "slides-data/api.html#des-questions",
    "href": "slides-data/api.html#des-questions",
    "title": "Les API",
    "section": "Des questions ?",
    "text": "Des questions ?\n\n\n\n\nLes ateliers du SSPHub"
  },
  {
    "objectID": "slides-data/index.html#the-obligatory-intro-slide",
    "href": "slides-data/index.html#the-obligatory-intro-slide",
    "title": "Le format de donn√©es Parquet",
    "section": "‚ÄúThe obligatory intro slide‚Äù",
    "text": "‚ÄúThe obligatory intro slide‚Äù\n\n\n\nSource : motherduck.com"
  },
  {
    "objectID": "slides-data/index.html#enjeux",
    "href": "slides-data/index.html#enjeux",
    "title": "Le format de donn√©es Parquet",
    "section": "Enjeux",
    "text": "Enjeux\n\nTendance √† la massification des donn√©es\n\nRelatif aux capacit√©s de stockage et de traitement\n\n\n\n\n\n\nSource : AI with Python"
  },
  {
    "objectID": "slides-data/index.html#pour-traiter-la-volum√©trie",
    "href": "slides-data/index.html#pour-traiter-la-volum√©trie",
    "title": "Le format de donn√©es Parquet",
    "section": "Pour traiter la volum√©trie",
    "text": "Pour traiter la volum√©trie\n\nUtiliser un format de donn√©es adapt√© (Parquet)\n\n\n\nUtiliser des outils informatiques adapt√©s\n\nSuffisant la plupart du temps : calcul larger than memory optimis√© (Arrow / DuckDB)\nSi volum√©trie massive : calcul distribu√© (Spark)\n\n\n\n\n\nUtiliser une infra de stockage adapt√©e (S3)\n\n\n\n\n\n\n\n\n\nNote\n\n\nNous allons voir comment ces trois points sont compl√©mentaires."
  },
  {
    "objectID": "slides-data/index.html#big-data-is-dead",
    "href": "slides-data/index.html#big-data-is-dead",
    "title": "Le format de donn√©es Parquet",
    "section": "‚ÄúBig Data is dead‚Äù ?",
    "text": "‚ÄúBig Data is dead‚Äù ?\n\nJordan Tigani : Big Data is dead\n\n‚ÄúThe big data frontier keeps receding‚Äù\n‚ÄúMost people don‚Äôt have that much data‚Äù\n‚ÄúMost data is rarely queried‚Äù\n\n\n\n\nPlaidoyer pour une parcimonie‚Ä¶\n\n‚Ä¶ qui facilite la mise en production !"
  },
  {
    "objectID": "slides-data/index.html#enjeux-1",
    "href": "slides-data/index.html#enjeux-1",
    "title": "Le format de donn√©es Parquet",
    "section": "Enjeux",
    "text": "Enjeux\n\nLe choix d‚Äôun format de donn√©es r√©pond √† un arbitrage entre plusieurs crit√®res :\n\nPublic cible\nFinalit√© (traitement, analyse, diffusion)\nVolum√©trie\nInterop√©rabilit√©"
  },
  {
    "objectID": "slides-data/index.html#formats-traditionnels",
    "href": "slides-data/index.html#formats-traditionnels",
    "title": "Le format de donn√©es Parquet",
    "section": "Formats traditionnels",
    "text": "Formats traditionnels\n\nFormats de donn√©es adh√©rents √† un langage (sas7bdat, RDS, fst, etc.)\n\nNon-interop√©rables -&gt; √† √©viter !\n\n\n\n\nLe format CSV\n\nInterop√©rable et simple d‚Äôutilisation\nPas de gestion des m√©ta-donn√©es\nPeu adapt√© aux donn√©es volumineuses"
  },
  {
    "objectID": "slides-data/index.html#limites-du-csv",
    "href": "slides-data/index.html#limites-du-csv",
    "title": "Le format de donn√©es Parquet",
    "section": "Limites du CSV",
    "text": "Limites du CSV\n\n\n\nDes performances limit√©es\n\nStockage : non-compress√© -&gt; espace disque √©lev√©\nLecture : ‚Äúorient√©-ligne‚Äù -&gt; performances faibles\n\n\n\n\n\n\n\n\n\nPas de typage des donn√©es √† l‚Äô√©criture du fichier\n\nDemande expertise et pr√©caution √† la lecture\nExemple: 01004 pour le code commune d‚ÄôAmb√©rieu-en-Bugey"
  },
  {
    "objectID": "slides-data/index.html#un-format-l√©ger",
    "href": "slides-data/index.html#un-format-l√©ger",
    "title": "Le format de donn√©es Parquet",
    "section": "Un format l√©ger ",
    "text": "Un format l√©ger \n\nStockage :\n\nCompression : entre 5 et 20 fois plus l√©ger qu‚Äôun CSV\n\n\n\n\n\n\n\n\n\n\nExemple: Recensement de la Population\n\n\n\nFicher d√©tail : 20 millions de lignes, 92 variables\n\nCSV: &gt; 4Go\nParquet: &lt; 500Mo"
  },
  {
    "objectID": "slides-data/index.html#un-format-efficace",
    "href": "slides-data/index.html#un-format-efficace",
    "title": "Le format de donn√©es Parquet",
    "section": "Un format efficace",
    "text": "Un format efficace\n\nLecture :\n\nJusqu‚Äô√† 34x plus rapide qu‚Äôun CSV\n\n\n\n\n‚ÄúOrient√© colonne‚Äù\n\nOptimis√© pour les traitements analytiques\nLimite la quantit√© de donn√©es √† mettre en m√©moire\nCon√ßu pour √™tre √©crit une fois mais lu fr√©quemment"
  },
  {
    "objectID": "slides-data/index.html#pour-optimiser-la-lecture",
    "href": "slides-data/index.html#pour-optimiser-la-lecture",
    "title": "Le format de donn√©es Parquet",
    "section": "Pour optimiser la lecture",
    "text": "Pour optimiser la lecture\n\nPartitionner ou ordonner les donn√©es\n\n\n\n\n\n\n\n\n\n\n\n\n\nL‚Äôart de bien partitionner\n\n\n\nPartitionner par une/des variable(s) d‚Äôint√©r√™t si gros fichier\n\nEviter de cr√©er de nombreux petits (&lt; 128Mo) fichiers\n\nSinon ordonner les donn√©es avant d‚Äô√©crire le fichier (cf.¬†Eric Mauvi√®re)"
  },
  {
    "objectID": "slides-data/index.html#un-format-universel-et-fiable",
    "href": "slides-data/index.html#un-format-universel-et-fiable",
    "title": "Le format de donn√©es Parquet",
    "section": "Un format universel et fiable",
    "text": "Un format universel et fiable\n\nGestion native des m√©ta-donn√©es\n\nD√©finition automatique d‚Äôun sch√©ma (noms, types)\nMise √† disposition plus robuste\n\n\n\n\nInterop√©rable\n\n\n\n\nOpen-source\n\n\n\n\nNon lisible par un humain mais de plus en plus de visualiseurs en ligne\n\nPar exemple sur le SSPCloud"
  },
  {
    "objectID": "slides-data/index.html#parquet-quels-avantages",
    "href": "slides-data/index.html#parquet-quels-avantages",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet: quels avantages ?",
    "text": "Parquet: quels avantages ?\n\nFormat libre, open source et ind√©pendant du langage ;\n\nLes formats propri√©taires imposent des outils aux consommateurs !\n\nPlus de confort pour les utilisateurs:\n\nDes requ√™tes plus rapides et efficaces: seulement les donn√©es n√©cessaires sont lues\nDes donn√©es conformes √† la mise √† disposition par le producteur"
  },
  {
    "objectID": "slides-data/index.html#parquet-quels-usages",
    "href": "slides-data/index.html#parquet-quels-usages",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet: quels usages ?",
    "text": "Parquet: quels usages ?\n\nFormat privil√©gi√© pour la mise √† disposition de donn√©es internes √† l‚ÄôInsee:\n\nMoins d‚Äôasym√©tries entre utilisateurs et producteurs.\n\n\n\n\n\n\n\n\n\nPremi√®res diffusions √† l‚Äôexterne\n\n\n\nBureaux de votes du r√©pertoire √©lectoral unique (REU):\nRecensement de la population (RP)\nBase permanente des √©quipements (BPE)"
  },
  {
    "objectID": "slides-data/index.html#parquet-quels-usages-1",
    "href": "slides-data/index.html#parquet-quels-usages-1",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet: quels usages ?",
    "text": "Parquet: quels usages ?\n\n\n\n\n\n\nExemples de cartes pouvant √™tre produites simplement avec les donn√©es du recensement diffus√©es par l‚ÄôInsee"
  },
  {
    "objectID": "slides-data/index.html#enjeu",
    "href": "slides-data/index.html#enjeu",
    "title": "Le format de donn√©es Parquet",
    "section": "Enjeu",
    "text": "Enjeu\n\nParquet ne r√©sout pas tout\n\nL‚Äôespace disque est optimis√©\nLes donn√©es d√©compress√©es doivent passer en RAM\n\n\n\n\nLe framework adapt√© d√©pend de la volum√©trie\n\nPour la plupart des besoins : Arrow et DuckDB"
  },
  {
    "objectID": "slides-data/index.html#les-frameworks",
    "href": "slides-data/index.html#les-frameworks",
    "title": "Le format de donn√©es Parquet",
    "section": "Les frameworks",
    "text": "Les frameworks\n\nDeux frameworks de r√©f√©rence : Arrow et DuckDB\n\nOrientation fichier (Arrow) VS orientation BDD (DuckDB)\n\n\n\n\nTraitement en-m√©moire optimis√©\n\nOrient√©s-colonne\nLazy evaluation (prochaine slide)\n\n\n\n\n\nTr√®s bonne int√©gration:\n\nAvec le tidyverse ()\nAvec le syst√®me de stockage S3"
  },
  {
    "objectID": "slides-data/index.html#les-frameworks-1",
    "href": "slides-data/index.html#les-frameworks-1",
    "title": "Le format de donn√©es Parquet",
    "section": "Les frameworks",
    "text": "Les frameworks"
  },
  {
    "objectID": "slides-data/index.html#la-lazy-evaluation",
    "href": "slides-data/index.html#la-lazy-evaluation",
    "title": "Le format de donn√©es Parquet",
    "section": "La lazy evaluation",
    "text": "La lazy evaluation\n\nLes frameworks comme Arrow ou DuckDB n‚Äôex√©cutent pas imm√©diatement les op√©rations\n\n\n\nLes instructions sont optimis√©es avant ex√©cution\n\nVous √©crivez un plan d‚Äôex√©cution, r√©interpr√©t√©\n\n\n\n\n\nAvantages :\n\nMoins de donn√©es manipul√©es inutilement\nMoins de RAM consomm√©e\nEx√©cution plus rapide car optimis√©e"
  },
  {
    "objectID": "slides-data/index.html#la-lazy-evaluation-1",
    "href": "slides-data/index.html#la-lazy-evaluation-1",
    "title": "Le format de donn√©es Parquet",
    "section": "La lazy evaluation",
    "text": "La lazy evaluation\n\n\n\n\n\n\n\nExemple d‚Äôune requ√™te lazy\n\n\nEn supposant qu‚Äôachille est un objet Arrow ou DuckDB:\nn_logements_depcom &lt;- achille |&gt;\n1  filter(dep %in% c(\"01\", \"02\", \"03\")) |&gt;\n2  select(idlogement, depcom) |&gt;\n  group_by(depcom) |&gt;\n  summarise(n_logements = n()) |&gt;\n3  collect()\n\n1\n\nR√©cup√®re seulement les donn√©es n√©cessaires\n\n2\n\nR√©cup√®re seulement les variables n√©cessaires\n\n3\n\nLes calculs ne sont effectu√©s qu‚Äô√† cette √©tape !"
  },
  {
    "objectID": "slides-data/index.html#la-lazy-evaluation-2",
    "href": "slides-data/index.html#la-lazy-evaluation-2",
    "title": "Le format de donn√©es Parquet",
    "section": "La lazy evaluation",
    "text": "La lazy evaluation\nVoici le d√©but du plan:\n\n‚ùìÔ∏è Pourrait-il √™tre optimis√© ?"
  },
  {
    "objectID": "slides-data/index.html#la-lazy-evaluation-3",
    "href": "slides-data/index.html#la-lazy-evaluation-3",
    "title": "Le format de donn√©es Parquet",
    "section": "La lazy evaluation",
    "text": "La lazy evaluation\nVoici le plan plus optimal:\n\nPredicate pushdown"
  },
  {
    "objectID": "slides-data/index.html#le-format-parquet",
    "href": "slides-data/index.html#le-format-parquet",
    "title": "Le format de donn√©es Parquet",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nParquet gagne sur tous les tableaux\n\n\n\n\n\n\n\n\n\n\nAteliers du SSPHub #2"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Les ateliers du SSPHub",
    "section": "",
    "text": "Les API\n\n\n\n\n\n\nLino Galiana\n\n\n09/04/2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nLe format de donn√©es Parquet\n\n\nSlides pr√©sentant les enjeux de l‚Äôutilisation du format Parquet et l‚Äô√©cosyst√®me associ√©\n\n\n\nLino Galiana\n\n\n16/04/2025\n\n\n\n\n\n\n\n\nAucun article correspondant"
  }
]